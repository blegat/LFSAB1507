\subsection{Estimation of the noise-to-signal power ratio (NSR)}

Deconvolution by the method of Wiener needs the NSR of the additive noise in the image. The problem of computing the NSR is that we need the original image, which we usually don't have, otherwise deblurring would have no meaning anymore. That is why we try to estimate the SNR by the following reasoning. The pixels of a zone that represent a background (e.g. an area of a blue sky) should be approximatively constant. So the variance of this area would me mostly due to the noise. So we will estimate the power of noise by the variance of such an area. This is the main idea of our matlab function $nsrEstimation(f,psf)$, with $f$ the processed image. % ca sert Ã  quoi psf? %cmt choisir intervention humaine ou pas? if true..?

This function proposes two ways to handle this. In the first one, the user must select an area that he considers as background. In the second way, the function selects automatically five regions: four in the corners and one in the center. It computes the variance for each region and it takes the zone with the least variance. The second method is probably less precise because the predefined regions might not represent parts of a background. But it has the advantage that it doesn't need a human intervention which means there is less work for the user and deblurring also goes faster. Indeed, it's not possible to ask the user to detect a region of background everytime you want to deblur an image when the goal is to have an algorithm near to real-time.

Once we have an estimation for the noise power, we compute the variance of the whole image to get the signal power and we divide the first value by the scond one, giving an estimation of the NSR.