%TODO : rajouter images

\chapter{Graphical User Interface}

In this work a graphical user interface was developed to simplify the accessibility to the software by non initiated users. A very simple but ergonomic interface was choosen. The aim was to deal as best as possible with the two problems, (the picture from a moving train and the blur item take by a camera) without spending too much time on graphical details of the GUI.


The graphical user interface is open by calling the function GUI.m. Firstly the user is invited to choose the kind of problem in a menu bar.


\section{Train}

The user can choose an image. Two cases are possibles: either he wants to artificially blur it or deblurring it. 

If he chooses to artificially blur the image(useful for validation tests), a new window is opened and the user can enter an angle and a length of blur. The resulting blurred image (after pressing "GO !") can then be deblurred, which brings us to the second possibility. It's also possible for the user to save the blurred image.

In case the user chooses to deblur the original image (or the artificially blurred one), a new window is opened. In this one, it's possible to choose or not to compress the photo to deblur (in order to accelerate the deconvolution,  as mentioned in our supplementary item) and deblurring method  (which will allow subsequently compare different results depending on the method used). The button "GO !" launches deblurring. The deblurred image can finally be save in a file.

\section{Camera video}

The user is prompted to select the folder containing the serie of images that we want to make the background (only one image in the folder if the background is known). The calculated background can then be optionally recorded.
Then, the user selects the folder of all images to deblur (with blurred foreground) and for each of them, the deblurred image is displayed next to the original one. Simultaneously, the background is updated taking into account any changes (new item, change brightness, ...).



\chapter{Codes}

\section{PSF estimation}
\matlabcode{angle_estimator_Gabor}{}
\matlabcode{angle_estimator}{}
\matlabcode{direct}{}
\matlabcode{length_estimator}{}
\matlabcode{oneway_psf}{}
\matlabcode{robust_angle_estimator}{}

\section{Train}
\matlabcode{blur}{Blur it.}
\matlabcode{deblur}{}
\matlabcode{testBlurDeblur}{}

\section{Camera}
\matlabcode{blur_cam}{}
\matlabcode{cam}{}
\matlabcode{deblur_cam}{}
\matlabcode{testCam}{}

\section{Utils}
\matlabcode{argmax}{}
\matlabcode{biggest_square}{}
\matlabcode{blurmetric}{}
\matlabcode{compression}{}
\matlabcode{flood_fill}{}
\matlabcode{max_coord_mat}{}
\matlabcode{mse}{}
\matlabcode{plothot}{}
\matlabcode{save_image}{}
\matlabcode{squareborder}{}

\section{Background estimation}
\matlabcode{DetectBackgroundColor}{}
\matlabcode{DetectBackground}{}
\matlabcode{UpdateBackgroundColor}{}
\matlabcode{UpdateBackground}{}

\section{Deconvolution methods}
\matlabcode{lucy}{This code is inspired from the code of the Lucy-Richardson code in wikipedia written by G3aj of the University College London and modified by a user with IP 82.16.146.178.}
\matlabcode{nsrEstimation}{}

\section{GUI}
\matlabcode{GUICameravideo}{}
\matlabcode{GUITrain}{}
\matlabcode{GUI}{}
